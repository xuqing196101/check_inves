<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="extract.dao.supplier.ExtractConditionRelationMapper">

	<resultMap type="extract.model.supplier.ExtractConditionRelation" id="base_info">
		<result column="CONDITION_ID" jdbcType="TIMESTAMP" property="conditionId" />
		<result column="PROPERTY_NAME" jdbcType="DECIMAL" property="propertyName" />
		<result column="PROPERTY_VALUE" jdbcType="VARCHAR" property="propertyValue" />
	</resultMap>

	<insert id="insertConditionRelation" parameterType="java.util.List">
		INSERT ALL
		<foreach collection="list" item="item" separator="">
			INTO T_SES_SMS_EXTRACT_CONDITIONS (CONDITION_ID,PROPERTY_NAME,PROPERTY_VALUE) VALUES
			(#{item.conditionId,jdbcType=VARCHAR},#{item.propertyName,jdbcType=VARCHAR},#{item.propertyValue,jdbcType=VARCHAR})
		</foreach>
		SELECT 1 FROM DUAL
	</insert>	
	<!-- 根据ID 和 属性名删除 -->
	<delete id="deleteConditionRelationByMap" parameterType="java.lang.String">
		DELETE FROM T_SES_SMS_EXTRACT_CONDITIONS WHERE CONDITION_ID = #{conditionId}
	</delete>
	
	<!-- 按条件id 和 属性名查询 -->
		<select id="getByMap" parameterType="map" resultType="java.lang.String">
			SELECT PROPERTY_VALUE FROM T_SES_SMS_EXTRACT_CONDITIONS WHERE CONDITION_ID = #{conditionId} AND PROPERTY_NAME = #{propertyName}
		</select>
	<!-- 查询详细抽取条件 -->
		<select id="getConTypeList" parameterType="java.lang.String" resultMap="base_info">
			SELECT PROPERTY_NAME,PROPERTY_VALUE FROM  T_SES_SMS_EXTRACT_CONDITIONS WHERE CONDITION_ID = #{value}
		</select>
	<!-- 修改属性值 -->	
		<update id="updateByMap" parameterType="map" >
			UPDATE T_SES_SMS_EXTRACT_CONDITIONS SET PROPERTY_VALUE = #{propertyValue} WHERE CONDITION_ID = #{conditionId} AND PROPERTY_NAME = #{propertyName}
		</update>
</mapper>